# ğŸï¸ ì™€êµ¬ì™€êµ¬ ë°°ë‹¬ ê¸°ì‚¬ ì„œë²„

### ğŸ‘¤ ë‹´ë‹¹ì : ì¡°ì§„í˜¸

## <br>ğŸ“ƒ í•µì‹¬ ê¸°ëŠ¥
### ë°°ë‹¬ ê¸°ì‚¬, ë‚´ì—­, ìš”ì²­ ê±´ ê´€ë¦¬ / ë°°ë‹¬ ê¸°ì‚¬ ì‹¤ì‹œê°„ ìœ„ì¹˜ ê´€ë¦¬ ë° ê±°ë¦¬ ê³„ì‚°

- ë°°ë‹¬ ê¸°ì‚¬ ì •ë³´ ê´€ë¦¬
- ë°°ë‹¬ ìƒì„¸ ë‚´ì—­ ê°€ì ¸ì˜¤ê¸°
- ë°°ë‹¬ ê¸°ì‚¬ ìê²© ê²€ì¦ í›„ ë°°ë‹¬ ìš”ì²­ ê±´ í• ë‹¹
- ë°°ë‹¬ ê¸°ì‚¬ ì‹¤ì‹œê°„ ìœ„ì¹˜ ì €ì¥ ë° ê°€ì ¸ì˜¤ê¸°
- ë‘ ì§€ì  ìœ„,ê²½ë„ë¡œ ì‚¬ì´ì˜ ê±°ë¦¬ ê³„ì‚°

## <br>ğŸ·ï¸ ì „ì²´ í”„ë¡œì íŠ¸ ë§í¬
https://github.com/WAGUWAGUUU/WAGUWAGU

## <br>âš™ï¸ ê¸°ìˆ ìŠ¤íƒ

### âœ”ï¸ Server Framework
![Spring-Boot](https://img.shields.io/badge/spring--boot-%236DB33F.svg?style=for-the-badge&logo=springboot&logoColor=white)

### âœ”ï¸ Database
![postgresql](https://img.shields.io/badge/postgresql-4169E1?style=for-the-badge&logo=postgresql&logoColor=white)
![redis](https://img.shields.io/badge/redis-FF4438?style=for-the-badge&logo=redis&logoColor=white)

### âœ”ï¸ Message Broker  
![apachekafka](https://img.shields.io/badge/apachekafka-231F20?style=for-the-badge&logo=apachekafka&logoColor=white)

### âœ”ï¸ Deployment  
![amazoneks](https://img.shields.io/badge/amazoneks-232F3E?style=for-the-badge&logo=amazoneks&logoColor=white)
![googlecloud](https://img.shields.io/badge/googlecloud-4285F4?style=for-the-badge&logo=googlecloud&logoColor=white)

### âœ”ï¸ Container & Container orchestration
![docker](https://img.shields.io/badge/docker-496ED?style=for-the-badge&logo=docker&logoColor=white)
![kubernetes](https://img.shields.io/badge/kubernetes-326CE5?style=for-the-badge&logo=kubernetes&logoColor=white)
![helm](https://img.shields.io/badge/helm-0F1689?style=for-the-badge&logo=helm&logoColor=white)

### âœ”ï¸ CI/CD  
![jenkins](https://img.shields.io/badge/jenkins-D24939?style=for-the-badge&logo=jenkins&logoColor=white)
   
## <br>ğŸ§¾ API ëª…ì„¸ì„œ (with Swagger API)<br><br>

<img width="1085" alt="image" src="https://github.com/user-attachments/assets/4ebb2ae2-7bbb-41c7-ac1b-38759efd342b">
<img width="1085" alt="image" src="https://github.com/user-attachments/assets/a584ba9c-c81a-42cb-a5ac-0a80ab9a693c">

<br><br>
## ğŸ§¾ ë°ì´í„° íë¦„ë„<br><br>
<img width="839" alt="image" src="https://github.com/user-attachments/assets/6cf60977-d629-45f1-b93b-d206ef220b57"><br>
<img width="845" alt="image" src="https://github.com/user-attachments/assets/e00e47e9-047b-4077-ac90-d73307a5ba3c"><br>
<img width="845" alt="image" src="https://github.com/user-attachments/assets/3f992d04-efe7-45a2-81d3-5f2edeb797e9">


## ğŸ”— ERD<br>
<img width="886" alt="image" src="https://github.com/user-attachments/assets/ce980faf-a0e8-43d1-93fb-6c5c3fe2e94e">

##  <br>ğŸ”§ ì„±ëŠ¥ ê°œì„  ì‚¬í•­

<img width="956" alt="image" src="https://github.com/user-attachments/assets/83f2b723-533c-46b7-818c-2deb3186d69e">




##  <br>ğŸ”§ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

**1. ë‚ ì§œë³„ ë° ì¼ë³„ ìƒì„¸ ë°°ë‹¬ ë‚´ì—­ì„ í™•ì¸í•  ë•Œ ì¤‘ë³µ ë°ì´í„° ë°œìƒ<br><br>**
> * ì›ì¸ : í•˜ë£¨ì— ì—¬ëŸ¬ ê±´ì˜ ë°°ë‹¬ ë‚´ì—­ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ì¤‘ë³µ ë°ì´í„°ê°€ ë°œìƒí•œë‹¤.<br><br>
> * í•´ê²° : ë‚ ì§œë¥¼ ê°–ëŠ” ë¶€ëª¨ í…Œì´ë¸”ê³¼ ìƒì„¸ ë‚´ì—­ì„ ê°–ëŠ” ìì‹ í…Œì´ë¸”(OneToMany ê´€ê³„)ë¡œ êµ¬ì„±

<br>

**2. Linux í™˜ê²½ì—ì„œ ```export postgres-user=root```ë¥¼ í•˜ë©´ ```-bash: export: `postgres-user=root': not a valid identifier```ì™€ ê°™ì€ ì—ëŸ¬ê°€ ëœ¬ë‹¤.<br><br>**
> * ì›ì¸ : linux í™˜ê²½ì—ì„œ í™˜ê²½ ë³€ìˆ˜ì´ë¦„ì— - (dash)ë¥¼ ì“¸ ìˆ˜ ì—†ë‹¤. ëŒ€ì‹  _ (underscore)ë¥¼ ì¨ì•¼ í•œë‹¤.<br><br>
> * í•´ê²° : ```export postgres_user=root``` í›„ ```echo $postgres_user``` ë¥¼ í•˜ë©´ rootë¡œ ì œëŒ€ë¡œ ëœ¬ë‹¤.

<br>

**3. Application.yaml fileì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ì‹œ ${ POSTGRES-USER }ì™€ ê°™ì´ ì¤‘ê´„í˜¸ì™€ ë³€ìˆ˜ëª… ì‚¬ì´ì— spaceê°€ ìˆìœ¼ë©´ í™˜ê²½ ë³€ìˆ˜ ì£¼ì…ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.<br><br>**
> * ì›ì¸ : Yaml fileì€ spaceê°€ ìˆê³  ì—†ìŒì„ êµ¬ë¶„í•œë‹¤. (space-sensitive) <br><br>
> * í•´ê²° : ${POSTGRES-USER} ë¡œ ì§„í–‰í•´ì•¼ ë°°í¬í•  ë•Œ docker run í˜¹ì€ kubernetesì˜ env í•­ëª©ì˜ í™˜ê²½ ë³€ìˆ˜ ê°’ì´ ì œëŒ€ë¡œ ì£¼ì…ëœë‹¤.

<br>

**4. Jenkins pipeline ë¬´í•œ ë¡œë”© ë°œìƒ<br><br>**
> * í˜„ìƒ : ```Started by GitHub push by jinho9482 [Pipeline] 
Start of Pipeline [Pipeline] 
node Still waiting to schedule task Waiting for next available executor```
<br><br>
> * ì›ì¸ : /var/jenkins_home í´ë”ì— ìš©ëŸ‰ ë¶€ì¡± @ Jenkins docker container <br><br>
> * ì„ì‹œ í•´ê²° : ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê°•ì œë¡œ pipelineì„ ì‹¤í–‰ ì‹œí‚¨ë‹¤.<br><br>
> <img width="1226" alt="image" src="https://github.com/user-attachments/assets/3ca8f4b0-43df-4608-b076-5a22a810530b"><br><br>
> * ê·¼ë³¸ í•´ê²° : pipeline ì‹¤í–‰ í›„ í´ë”ì˜ logë“¤ì„ ì§€ìš°ë„ë¡ ì„¤ì •í•œë‹¤. "Workspace Cleanup" plugin ì‚¬ìš©

<br>

**5. Ingressì— ë“¤ì–´ì˜¨ ëª¨ë“  api ìš”ì²­ (ex. /api/v1/riders, /api/v1/orders)ì´ path : / ë¡œ ì„¤ì •ëœ ê³³ìœ¼ë¡œ ì´ë™í•œë‹¤. @ ingress-controller.yaml<br><br>**
> * ì›ì¸ : root path ( / ) ì´ ì œì¼ ì²˜ìŒ ì„¤ì •ë˜ì–´ ìˆì–´ /ë¡œ ì‹œì‘í•˜ëŠ” ëª¨ë“  api ìš”ì²­ì€ / ì™€ ì—°ê²°ëœ serviceë¡œ ë³´ë‚´ì§„ë‹¤.<br><br>
> * í•´ê²° : root pathë¥¼ ì œì¼ ë’¤ë¡œ ë³´ëƒ„
>```yaml
> spec:
>   ingressClassName: nginx
>   rules:
>     - http:
>         paths:
>           - path: /api/v1/orders
>             pathType: Prefix
>             backend:
>               service:
>                 name: order-waguwagu-order
>                 port:
>                   number: 8080
>           - path: /api/v1/auth
>             pathType: Prefix
>             backend:
>               service:
>                 name: wgwg-auth-server
>                 port:
>                   number: 8080
>           // root pathë¥¼ ì œì¼ ë’¤ë¡œ    
>           - path: / 
>             pathType: Prefix
>             backend:
>               service:
>                 name: wgwg-store-front
>                 port:
>                   number: 80
>```

<br>

**6. Appê³¼ AWS EKS cluster server ê°„ https í†µì‹  ë¶ˆëŸ‰ (ë¯¸í•´ê²°)<br><br>**
> * í˜„ìƒ : web ~ serverê°„ https í†µì‹ ì€ ì˜ ë˜ë‚˜, app ~ server ê°„ í†µì‹  ë¶ˆê°€<br><br>
> * í™•ì¸ ë‚´ìš© : Axios network error ë°œìƒ @app (Error code ì—†ìŒ)SSL ì¸ì¦ì„œë¥¼ ê°€ì§€ê³  ìˆëŠ” nginx ì—ë„ logê°€ ì°íˆì§€ ì•ŠìŒ<br><br>
> * ì¶”ì¸¡ ì›ì¸ : Web browserì—ì„œëŠ” ì¸ì¦ì´ ë˜ë‚˜, Android deviceì—ì„œëŠ” í•´ë‹¹ ì¸ì¦ì„œë¥¼ ì¸ì¦í•  ì¸ì¦ì„œê°€ ì—†ìŒ<br><br>
> * ì·¨í•œ Action : Android xml íŒŒì¼ì— ì§ì ‘ ì¸ì¦ì„œë¥¼ ë„£ìŒ<br><br>
> * ê²°ê³¼  : í•´ë‹¹ ì„¤ì •ì´ http í†µì‹  (OAuth ì¸ì¦)ì„ ë§‰ì•„ ì§„í–‰ ë¶ˆê°€<br><br>
> * í˜„ì¬ ìƒí™© : httpë¡œ í†µì‹ <br><br>
> * ì¶”í›„ Action : ì¶”ê°€ ì›ì¸ ë¶„ì„ì„ í†µí•´ httpsë¡œ ì›ë³µ ì˜ˆì •<br><br>
> * ì°¸ê³  : í˜„ì¬ network flow (nginx load balancerê°€ 2ê°œ ì¡´ì¬í•˜ì—¬ 1ê°œë¡œ í•©ì¹  í•„ìš” ìˆìŒ)
> <img width="1145" alt="image" src="https://github.com/user-attachments/assets/f2a32a48-d519-4f32-af1f-8865a7572ea6">

